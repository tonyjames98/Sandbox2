<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-CWLM2ED828"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-CWLM2ED828');
    </script>
    <script defer src="https://cloud.umami.is/script.js" data-website-id="6172d55e-bc29-4863-b008-31cdcfe033f1"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="See Your Financial Future in Minutes! Free calculator to visualize wealth growth, plan investments, and achieve money goals. No signup—start projecting now!">
    <meta name="keywords" content="financial projection calculator, investment growth calculator, net worth tracker, wealth planning tool, retirement savings calculator, financial goal planner, future net worth estimator, free finance calculator, money projection tool">
    <meta name="author" content="My Projection Calculator">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://myprojectioncalculator.com/">
    <meta property="og:title" content="My Projection Calculator - Free Financial Planning Tool">
    <meta property="og:description" content="See Your Financial Future in Minutes! Visualize wealth growth, plan investments, and achieve your money goals. 100% free—no signup required!">
    <meta property="og:image" content="https://myprojectioncalculator.com/og-image.png">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://myprojectioncalculator.com/">
    <meta property="twitter:title" content="My Projection Calculator - Free Financial Planning Tool">
    <meta property="twitter:description" content="See Your Financial Future in Minutes! Visualize wealth growth, plan investments, and achieve your money goals. 100% free—no signup required!">
    <meta property="twitter:image" content="https://myprojectioncalculator.com/og-image.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://myprojectioncalculator.com/">
    
    <title>My Projection Calculator - Free Financial Planning Tool</title>
    
    <!-- Fonts and Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Preload critical resources -->
    <link rel="preload" href="styles.css" as="style">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/chart.js" as="script">
    
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase-config.js"></script>
    <script src="db-sync.js" defer></script>
    <script src="auth.js" defer></script>
    
    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "My Projection Calculator",
        "description": "Free personal finance projection calculator for investment planning and net worth tracking",
        "url": "https://myprojectioncalculator.com",
        "applicationCategory": "FinanceApplication",
        "operatingSystem": "Web Browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "featureList": [
            "Investment tracking",
            "Financial projections",
            "Net worth calculator",
            "Chart visualizations",
            "Data export",
            "Share projections"
        ],
        "author": {
            "@type": "Organization",
            "name": "My Projection Calculator"
        }
    }
    </script>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar Navigation (Desktop) -->
        <div id="sidebar-overlay" class="sidebar-overlay"></div>
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="brand" onclick="switchTab('dashboard')" role="button" tabindex="0">
                    <div class="brand-icon">
                        <i data-lucide="bar-chart-3"></i>
                    </div>
                    <div class="brand-text">
                        <span class="brand-name">My Projection</span>
                        <span class="brand-tagline">Finance Planner</span>
                    </div>
                </div>
                <button class="mobile-close-btn" id="mobile-sidebar-close">
                    <i data-lucide="x"></i>
                </button>
            </div>
            
            <nav class="sidebar-nav">
                <button class="nav-item active" data-tab="dashboard">
                    <i data-lucide="layout-dashboard"></i>
                    <span>Dashboard</span>
                </button>
                <button class="nav-item" data-tab="investments">
                    <i data-lucide="briefcase"></i>
                    <span>Add Assets/Debt</span>
                </button>
                <button class="nav-item" data-tab="events">
                    <i data-lucide="calendar"></i>
                    <span>Add Income/Withdrawal</span>
                </button>
                <button class="nav-item" data-tab="goals">
                    <i data-lucide="target"></i>
                    <span>Financial Goals</span>
                </button>
                <button class="nav-item" data-tab="advanced">
                    <i data-lucide="flask-conical"></i>
                    <span>Advanced</span>
                </button>
                <button class="nav-item" data-tab="export">
                    <i data-lucide="file-output"></i>
                    <span>Export/Share</span>
                </button>
                <button class="nav-item" data-tab="guide">
                    <i data-lucide="help-circle"></i>
                    <span>Guide</span>
                </button>
                <button class="nav-item" data-tab="ai-analysis">
                    <i data-lucide="bot"></i>
                    <span>AI Analysis</span>
                </button>

                <!-- Mobile-Only Auth & Reset -->
                <div class="mobile-nav-actions">
                    <div class="header-divider"></div>
                    <div class="sidebar-auth-section" id="sidebar-auth-section">
                        <button class="nav-item" id="sidebar-login-btn" onclick="showAuthModal('login')">
                            <i data-lucide="log-in"></i>
                            <span>Login / Sign Up</span>
                        </button>
                        <div id="sidebar-profile-btn" class="nav-item profile-info" style="display: none;">
                            <i data-lucide="user"></i>
                            <span id="user-email-display" class="user-email">user@example.com</span>
                            <button class="btn-icon btn-logout" onclick="logout()" title="Logout">
                                <i data-lucide="log-out"></i>
                            </button>
                        </div>
                    </div>
                    <button class="nav-item btn-reset-mobile" onclick="resetAllData()">
                        <i data-lucide="trash-2"></i>
                        <span>Reset Data</span>
                    </button>
                </div>
            </nav>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <header class="top-bar">
                <div class="top-bar-left">
                    <button class="mobile-menu-btn" id="mobile-menu-toggle-btn">
                        <i data-lucide="menu"></i>
                    </button>
                    <h1 id="page-title">Dashboard</h1>
                </div>
                <div class="top-bar-actions">
                    <button class="btn btn-sm btn-outline quick-share-btn" onclick="shareProjection()" data-tooltip="Copy a shareable link to your current projection">
                        <i data-lucide="share-2"></i>
                        <span>Share</span>
                    </button>
                    
                    <div class="header-divider"></div>
                    
                    <!-- Auth & Reset in Header -->
                    <div class="header-auth-section" id="header-auth-section">
                        <button class="btn btn-sm btn-primary" id="header-login-btn" onclick="showAuthModal('login')">
                            <i data-lucide="log-in"></i>
                            <span>Login / Sign Up</span>
                        </button>
                        <div id="header-profile-btn" class="profile-info-header" style="display: none;">
                            <div class="user-avatar">
                                <i data-lucide="user"></i>
                            </div>
                            <span id="user-email-display-header" class="user-email">user@example.com</span>
                            <button class="btn-icon btn-logout" onclick="logout()" title="Logout">
                                <i data-lucide="log-out"></i>
                            </button>
                        </div>
                    </div>

                    <div class="header-divider"></div>

                    <button class="btn btn-sm btn-ghost btn-reset-header" onclick="resetAllData()" title="Reset all data and start over">
                        <i data-lucide="trash-2"></i>
                        <span>Reset</span>
                    </button>
                </div>
            </header>

            <div class="viewport">
                <!-- Dashboard Tab -->
                <div class="tab-content active" id="dashboard">
                    <div class="kpi-grid">
                        <div class="kpi-card primary" data-tooltip="Manage your current assets and liabilities.">
                            <div class="kpi-header">
                                <span>Current Net Worth</span>
                                <i data-lucide="wallet"></i>
                            </div>
                            <div class="kpi-value" id="current-net-worth">$0</div>
                            <div class="kpi-subtitle" id="onboarding-sample-container">
                                <button class="btn-text btn-sm" onclick="loadSampleScenario()" style="color: var(--text-on-gradient); opacity: 0.9; text-decoration: underline;">
                                    Try Sample Scenario
                                </button>
                            </div>
                            <div class="kpi-actions-row">
                                <button id="guide-add-investment" class="kpi-btn" onclick="quickAddInvestment('Stocks')">
                                    <i data-lucide="plus"></i>
                                    <span>Add Asset</span>
                                </button>
                                <button id="guide-add-debt" class="kpi-btn" onclick="quickAddInvestment('Debt')">
                                    <i data-lucide="plus"></i>
                                    <span>Add Debt</span>
                                </button>
                            </div>
                        </div>
                        <div class="kpi-card accent" id="guide-events-card" data-tooltip="Manage your financial events like salary, bonuses, or major purchases.">
                            <div class="kpi-header">
                                <span>Portfolio Summary</span>
                                <i data-lucide="pie-chart"></i>
                            </div>
                            <div class="kpi-stats">
                                <div class="mini-stat">
                                    <span id="investment-count">0</span>
                                    <label>Assets</label>
                                </div>
                                <div class="mini-stat">
                                    <span id="event-count">0</span>
                                    <label>Events</label>
                                </div>
                            </div>
                            <div class="kpi-subtitle">&nbsp;</div>
                            <div class="kpi-actions-row">
                                <button class="kpi-btn" onclick="quickAddEventType('income')">
                                    <i data-lucide="plus"></i>
                                    <span>Income</span>
                                </button>
                                <button class="kpi-btn" onclick="quickAddEventType('withdrawal')">
                                    <i data-lucide="plus"></i>
                                    <span>Withdrawal</span>
                                </button>
                            </div>
                        </div>
                        <div class="kpi-card secondary">
                            <div class="kpi-header">
                                <span>Projected Future</span>
                                <i data-lucide="trending-up"></i>
                            </div>
                            <div class="kpi-value" id="projected-net-worth-value">$0</div>
                            <div class="kpi-subtitle" id="projection-years-label">By 2054</div>
                            <div class="kpi-actions-row">
                                <button class="kpi-btn" onclick="updateProjectionPeriod(10)">10Y</button>
                                <button class="kpi-btn" onclick="updateProjectionPeriod(20)">20Y</button>
                                <button class="kpi-btn" onclick="updateProjectionPeriod(30)">30Y</button>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-charts">
                        <div class="chart-card main-chart">
                            <div class="chart-header">
                                <div class="header-title-group">
                                    <h3>Net Worth Projection</h3>
                                    <div id="scenario-controls" class="scenario-controls" style="display: none;">
                                        <span class="scenario-badge">Comparing with Baseline</span>
                                        <button class="btn-text btn-sm" onclick="resetToBaseline()" title="Revert to baseline state">
                                            <i data-lucide="rotate-ccw"></i> Reset
                                        </button>
                                        <button class="btn-text btn-sm" onclick="clearBaseline()" title="Commit these changes as your new baseline">
                                            <i data-lucide="check"></i> Set this as my new baseline
                                        </button>
                                    </div>
                                </div>
                                <div class="chart-controls">
                                    <div class="inflation-controls">
                                        <div class="toggle-wrapper">
                                            <label class="switch">
                                                <input type="checkbox" id="adjust-inflation" onchange="toggleInflationInput()">
                                                <span class="slider"></span>
                                            </label>
                                            <span class="toggle-label" data-tooltip="Reduces your future net worth to show what it would be worth in today's dollars.">Inflation</span>
                                        </div>
                                        <div id="inflation-rate-wrapper" class="inflation-rate-input-wrapper" style="display: none;">
                                            <input type="number" id="inflation-rate" step="0.1" value="2.5" min="0" max="20" data-tooltip="Expected annual inflation rate (Historically ~2.5%).">
                                            <span class="input-suffix">%</span>
                                        </div>
                                    </div>
                                    <button id="save-baseline-btn" class="btn btn-outline btn-sm" onclick="saveBaseline()" data-tooltip="Saves current projection to compare against future changes.">
                                        <i data-lucide="save"></i>
                                        <span>Set Baseline</span>
                                    </button>
                                    <div id="guide-years" class="input-group years-input-group">
                                        <label for="projection-years-input" data-tooltip="How many years into the future should we project?">Projection Period</label>
                                        <div class="input-with-symbol years-wrapper">
                                            <input type="number" id="projection-years-input" min="1" max="60" value="30" oninput="runProjection()">
                                            <span class="input-suffix">Years</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="net-worth-chart"></canvas>
                            </div>
                            <!-- What-If Sliders -->
                            <div class="what-if-controls">
                                <div class="what-if-header">
                                    <i data-lucide="zap" style="width: 16px; height: 16px; color: var(--warning);"></i>
                                    <span>What-If Scenarios</span>
                                    <button class="btn-text btn-sm" onclick="resetWhatIfSliders()" id="reset-what-if" style="display: none; margin-left: auto;">Reset</button>
                                </div>
                                <div class="sliders-grid">
                                    <div class="slider-group">
                                        <div class="slider-info">
                                            <label>Market Performance</label>
                                            <span id="market-offset-val">0%</span>
                                        </div>
                                        <input type="range" id="market-performance-slider" min="-5" max="5" step="0.1" value="0" oninput="updateWhatIf()">
                                        <div class="slider-labels">
                                            <span>Bear (-5%)</span>
                                            <span>Bull (+5%)</span>
                                        </div>
                                    </div>
                                    <div class="slider-group">
                                        <div class="slider-info">
                                            <div class="slider-label-group">
                                                <label>Monthly Boost/Expense</label>
                                                <select id="savings-boost-target" class="boost-target-select" onchange="updateWhatIf()" title="Target account for this boost/expense">
                                                </select>
                                            </div>
                                            <span id="savings-boost-val">$0</span>
                                        </div>
                                        <input type="range" id="savings-boost-slider" min="-10000" max="10000" step="100" value="0" oninput="updateWhatIf()">
                                        <div class="slider-labels">
                                            <span>-$10k</span>
                                            <span>$0</span>
                                            <span>$10k</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="chart-card side-chart">
                            <h3>Asset Allocation</h3>
                            <div class="chart-container">
                                <canvas id="allocation-chart"></canvas>
                            </div>
                            
                            <div id="debt-allocation-section" style="display: none; margin-top: 1.5rem; border-top: 1px solid var(--border-light); padding-top: 1.5rem;">
                                <h3>Debt Allocation</h3>
                                <div class="chart-container">
                                    <canvas id="debt-allocation-chart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-section">
                        <h3>Asset Allocation Over Time</h3>
                        <div class="chart-container tall">
                            <canvas id="allocation-timeline-chart"></canvas>
                        </div>
                    </div>

                    <div class="dashboard-section">
                        <h3>Projection Timeline</h3>
                        <div class="table-container">
                            <table id="projection-table">
                                <thead>
                                    <tr id="projection-table-header">
                                        <th>Year</th>
                                        <th>Net Worth</th>
                                        <th>Growth</th>
                                        <th>Events</th>
                                    </tr>
                                </thead>
                                <tbody id="projection-table-body"></tbody>
                            </table>
                        </div>
                    </div>

                    <div class="dashboard-section portfolio-analysis-section">
                        <div class="section-header">
                            <h3>Portfolio Analysis & Insights</h3>
                            <i data-lucide="info" class="info-icon" onclick="showDisclaimerModal()"></i>
                        </div>
                        <div id="portfolio-insights">
                            <!-- Insights populated by JS -->
                        </div>
                    </div>
                </div>

                <!-- Investments Tab -->
                <div class="tab-content" id="investments">
                    <div class="content-header">
                        <h2>Add Assets & Debt</h2>
                        <button class="btn btn-primary" onclick="showAddInvestmentModal()">
                            <i data-lucide="plus"></i>
                            <span>Add Asset/Debt</span>
                        </button>
                    </div>
                    <div class="investments-list" id="investments-list">
                        <div class="empty-state">
                            <div class="empty-state-icon">
                                <i data-lucide="briefcase"></i>
                            </div>
                            <div class="empty-state-content">
                                <h3>No Assets Yet</h3>
                                <p>Add your first investment, bank account, or property to start your projection.</p>
                                <button class="btn btn-primary" onclick="showAddInvestmentModal()" style="margin-top: 1rem;">
                                    <i data-lucide="plus"></i>
                                    <span>Add Asset</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Events Tab -->
                <div class="tab-content" id="events">
                    <div class="content-header">
                        <h2>Add Income & Withdrawal</h2>
                        <div class="header-actions">
                            <button class="btn btn-primary" onclick="showAddEventModal('expense')">
                                <i data-lucide="plus"></i>
                                <span>Add Event</span>
                            </button>
                        </div>
                    </div>
                    <div class="event-quick-actions">
                        <button class="action-card income" onclick="showAddEventModal('income')">
                            <div class="action-icon"><i data-lucide="trending-up"></i></div>
                            <div class="action-label">Income</div>
                        </button>
                        <button class="action-card expense" onclick="showAddEventModal('expense')">
                            <div class="action-icon"><i data-lucide="trending-down"></i></div>
                            <div class="action-label">Expense</div>
                        </button>
                        <button class="action-card transfer" onclick="showAddEventModal('transfer')">
                            <div class="action-icon"><i data-lucide="repeat"></i></div>
                            <div class="action-label">Transfer</div>
                        </button>
                        <button class="action-card withdrawal" onclick="showAddEventModal('withdrawal')">
                            <div class="action-icon"><i data-lucide="wallet"></i></div>
                            <div class="action-label">Withdrawal</div>
                        </button>
                        <button class="action-card rebalancing" onclick="showAddEventModal('rebalancing')">
                            <div class="action-icon"><i data-lucide="refresh-cw"></i></div>
                            <div class="action-label">Rebalancing</div>
                        </button>
                    </div>
                    <div class="events-list" id="events-list">
                        <div class="empty-state">
                            <div class="empty-state-icon">
                                <i data-lucide="calendar"></i>
                            </div>
                            <div class="empty-state-content">
                                <h3>No Financial Events</h3>
                                <p>Model your life changes like salary increases, major purchases, or retirement withdrawals.</p>
                                <button class="btn btn-primary" onclick="showAddEventModal('income')" style="margin-top: 1rem;">
                                    <i data-lucide="plus"></i>
                                    <span>Add Event</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Goals Tab -->
                <div class="tab-content" id="goals">
                    <div class="content-header">
                        <h2>Financial Goals</h2>
                        <button class="btn btn-primary" onclick="showAddGoalModal()">
                            <i data-lucide="plus"></i>
                            <span>Add Goal</span>
                        </button>
                    </div>
                    <div class="goals-grid" id="goals-list">
                        <div class="empty-state">
                            <div class="empty-state-icon">
                                <i data-lucide="target"></i>
                            </div>
                            <div class="empty-state-content">
                                <h3>No Goals Set</h3>
                                <p>Set a target for retirement, a home purchase, or any other financial objective.</p>
                                <button class="btn btn-primary" onclick="showAddGoalModal()" style="margin-top: 1rem;">
                                    <i data-lucide="plus"></i>
                                    <span>Set Goal</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Advanced Tab -->
                <div class="tab-content" id="advanced">
                    <div class="content-header">
                        <h2>Advanced Simulations</h2>
                    </div>
                    <div class="advanced-grid">
                        <div class="card mc-card">
                            <div class="mc-header">
                                <i data-lucide="trending-up"></i>
                                <h3>Monte Carlo Simulation</h3>
                                <div class="mc-info-icon" data-tooltip="Simulates 1000s of scenarios with random market fluctuations to show the probability of reaching your goals.">
                                    <i data-lucide="info" style="width: 14px; height: 14px;"></i>
                                </div>
                            </div>
                            <p class="mc-description">See how market volatility impacts your projection. Unlike the standard linear projection, this models 1,000 potential futures.</p>
                            
                            <div class="mc-settings">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Expected Volatility (Std Dev %)</label>
                                        <div class="slider-with-input">
                                            <div class="input-with-symbol percent">
                                                <input type="number" id="mc-volatility" min="0" max="30" step="0.5" value="12" oninput="document.getElementById('mc-volatility-slider').value = this.value">
                                            </div>
                                            <input type="range" id="mc-volatility-slider" min="0" max="30" step="0.5" value="12" oninput="document.getElementById('mc-volatility').value = this.value">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label>Number of Iterations</label>
                                        <select id="mc-iterations">
                                            <option value="100">100 (Fast)</option>
                                            <option value="500" selected>500 (Balanced)</option>
                                            <option value="1000">1,000 (Detailed)</option>
                                        </select>
                                    </div>
                                </div>
                                <button class="btn btn-primary" onclick="runMonteCarlo()">
                                    <i data-lucide="play"></i>
                                    <span>Run Monte Carlo</span>
                                </button>
                            </div>

                            <div class="mc-results" id="mc-results" style="display: none;">
                                <div class="mc-stats-grid">
                                    <div class="mc-stat-item">
                                        <label>90th Percentile (Best Case)</label>
                                        <span id="mc-p90" class="text-success">$0</span>
                                    </div>
                                    <div class="mc-stat-item">
                                        <label>50th Percentile (Median)</label>
                                        <span id="mc-p50" class="text-info">$0</span>
                                    </div>
                                    <div class="mc-stat-item">
                                        <label>10th Percentile (Worst Case)</label>
                                        <span id="mc-p10" class="text-danger">$0</span>
                                    </div>
                                </div>
                                <div class="chart-container" style="height: 350px;">
                                    <canvas id="mc-chart"></canvas>
                                </div>
                                <div class="mc-probability-card">
                                    <div class="probability-label">Probability of reaching your goals:</div>
                                    <div class="probability-value" id="mc-goal-probability">0%</div>
                                </div>
                            </div>
                        </div>

                        <!-- Sequence of Returns Risk -->
                        <div class="card sim-card">
                            <div class="sim-header">
                                <i data-lucide="alert-triangle"></i>
                                <h3>Sequence of Returns Risk</h3>
                                <div class="mc-info-icon" data-tooltip="Tests the impact of a market crash happening in the year you specify.">
                                    <i data-lucide="info" style="width: 14px; height: 14px;"></i>
                                </div>
                            </div>
                            <p class="sim-description">What if a crash happens exactly when you stop working or start a new phase?</p>
                            <div class="sim-settings">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Crash Year</label>
                                        <input type="number" id="sor-crash-year" value="1" min="1" max="50">
                                    </div>
                                    <div class="form-group">
                                        <label>Magnitude (%)</label>
                                        <input type="number" id="sor-magnitude" value="25" min="0" max="100">
                                    </div>
                                </div>
                                <button class="btn btn-outline btn-sm" onclick="runSequenceOfReturns()">Run Stress Test</button>
                            </div>
                            <div class="sim-results" id="sor-results" style="display: none;">
                                <div id="sor-impact-summary" class="impact-summary"></div>
                                <div class="chart-container" style="height: 250px;">
                                    <canvas id="sor-chart"></canvas>
                                </div>
                            </div>
                        </div>

                        <!-- FIRE SWR Analyzer -->
                        <div class="card sim-card">
                            <div class="sim-header">
                                <i data-lucide="flame"></i>
                                <h3>FIRE SWR Analyzer</h3>
                                <div class="mc-info-icon" data-tooltip="Calculates your Financial Independence (FI) number and when you'll hit it.">
                                    <i data-lucide="info" style="width: 14px; height: 14px;"></i>
                                </div>
                            </div>
                            <p class="sim-description">Enter your target expenses to find your 'FI Number' and projection date.</p>
                            <div class="sim-settings">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Yearly Expenses ($)</label>
                                        <div class="input-with-symbol currency">
                                            <input type="number" id="fire-expenses" value="60000" min="0">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label>SWR (%)</label>
                                        <div class="input-with-symbol percent">
                                            <input type="number" id="fire-swr" value="4" min="0" max="10" step="0.1">
                                        </div>
                                    </div>
                                </div>
                                <button class="btn btn-outline btn-sm" onclick="runFireSWR()">Analyze FIRE</button>
                            </div>
                            <div class="sim-results" id="fire-results" style="display: none;">
                                <div class="fi-number-card">
                                    <label>Required FI Number:</label>
                                    <div id="fire-number-val" class="fi-val">$0</div>
                                </div>
                                <div id="fire-success-rate" class="fi-status"></div>
                            </div>
                        </div>

                        <!-- Compound Interest Calculator -->
                        <div class="card sim-card">
                            <div class="sim-header">
                                <i data-lucide="line-chart"></i>
                                <h3>Compound Interest Calculator</h3>
                                <div class="mc-info-icon" data-tooltip="Standalone calculator to see how a single investment grows over time with regular additions.">
                                    <i data-lucide="info" style="width: 14px; height: 14px;"></i>
                                </div>
                            </div>
                            <p class="sim-description">Calculate growth for a single scenario without affecting your main plan.</p>
                            <div class="sim-settings">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Initial Principal ($)</label>
                                        <div class="input-with-symbol currency">
                                            <input type="number" id="ci-principal" value="10000" min="0">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label>Annual Addition ($)</label>
                                        <div class="input-with-symbol currency">
                                            <input type="number" id="ci-annual" value="12000" min="0">
                                        </div>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Years to Grow</label>
                                        <input type="number" id="ci-years" value="20" min="1" max="100">
                                    </div>
                                    <div class="form-group">
                                        <label>Interest Rate (%)</label>
                                        <div class="input-with-symbol percent">
                                            <input type="number" id="ci-rate" value="7" min="0" max="100" step="0.1">
                                        </div>
                                    </div>
                                </div>
                                <button class="btn btn-outline btn-sm" onclick="runCompoundInterest()">Calculate Growth</button>
                            </div>
                            <div class="sim-results" id="ci-results" style="display: none;">
                                <div class="fi-number-card">
                                    <label>Future Value:</label>
                                    <div id="ci-future-val" class="fi-val">$0</div>
                                </div>
                                <div class="impact-summary">
                                    Total Contributions: <span id="ci-total-contributions">$0</span><br>
                                    Total Interest: <span id="ci-total-interest" class="text-success">$0</span>
                                </div>
                                <div class="chart-container" style="height: 200px;">
                                    <canvas id="ci-chart"></canvas>
                                </div>
                            </div>
                        </div>

                        <!-- Loan Amortization Calculator -->
                        <div class="card sim-card">
                            <div class="sim-header">
                                <i data-lucide="calculator"></i>
                                <h3>Loan Amortization</h3>
                                <div class="mc-info-icon" data-tooltip="Standalone loan calculator to see your monthly payments and interest breakdown over the life of a loan.">
                                    <i data-lucide="info" style="width: 14px; height: 14px;"></i>
                                </div>
                            </div>
                            <p class="sim-description">Calculate monthly payments and see how much interest you'll pay over time.</p>
                            <div class="sim-settings">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Loan Amount ($)</label>
                                        <div class="input-with-symbol currency">
                                            <input type="number" id="loan-amount" value="300000" min="0">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label>Interest Rate (%)</label>
                                        <div class="input-with-symbol percent">
                                            <input type="number" id="loan-rate" value="6.5" min="0" max="100" step="0.1">
                                        </div>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Loan Term (Years)</label>
                                        <input type="number" id="loan-years" value="30" min="1" max="50">
                                    </div>
                                </div>
                                <button class="btn btn-outline btn-sm" onclick="runAmortization()">Calculate Loan</button>
                            </div>
                            <div class="sim-results" id="loan-results" style="display: none;">
                                <div class="fi-number-card">
                                    <label>Monthly Payment:</label>
                                    <div id="loan-monthly-val" class="fi-val">$0</div>
                                </div>
                                <div class="impact-summary">
                                    Total Principal: <span id="loan-total-principal">$0</span><br>
                                    Total Interest: <span id="loan-total-interest" class="text-danger">$0</span><br>
                                    Total Cost: <span id="loan-total-cost">$0</span>
                                </div>
                                <div class="chart-container" style="height: 200px; margin-bottom: 1.5rem;">
                                    <canvas id="loan-chart"></canvas>
                                </div>
                                <div class="table-container" style="max-height: 300px; overflow-y: auto;">
                                    <table id="amortization-table">
                                        <thead>
                                            <tr>
                                                <th>Year</th>
                                                <th>Principal</th>
                                                <th>Interest</th>
                                                <th>Remaining</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Export Tab -->
                <div class="tab-content" id="export">
                    <div class="content-header">
                        <h2>Export & Sharing</h2>
                    </div>
                    <div class="export-grid">
                        <div class="card export-card">
                            <i data-lucide="file-text"></i>
                            <h3>Projection Data</h3>
                            <p>Download your full projection timeline.</p>
                            <div class="card-actions">
                                <button class="btn btn-outline" onclick="exportProjectionCSV()">CSV</button>
                                <button class="btn btn-primary" onclick="exportProjectionExcel()">Excel</button>
                            </div>
                        </div>
                        <div class="card export-card">
                            <i data-lucide="database"></i>
                            <h3>Raw Data</h3>
                            <p>Export or import your entire financial plan as a JSON file.</p>
                            <div class="card-actions">
                                <button class="btn btn-secondary btn-sm" onclick="exportRawData()">Export</button>
                                <button class="btn btn-outline btn-sm" onclick="importData()">Import</button>
                            </div>
                        </div>
                        <div class="card export-card">
                            <i data-lucide="share-2"></i>
                            <h3>Share Link</h3>
                            <p>Create a shareable link to your projection.</p>
                            <button class="btn btn-primary" onclick="shareProjection()">Copy Link</button>
                        </div>
                    </div>
                </div>

                <!-- Guide Tab -->
                <div class="tab-content" id="guide">
                    <div class="content-header">
                        <h2>User Guide</h2>
                    </div>
                    <div class="guide-grid" id="guide-content">
                        <div class="card guide-card">
                            <i data-lucide="layout-dashboard"></i>
                            <h3>Dashboard</h3>
                            <p>Get a high-level view of your current net worth, projected future wealth, and asset allocation. Use the <strong>"What-If"</strong> sliders to instantly see how market performance or extra savings impact your future wealth.</p>
                        </div>
                        <div class="card guide-card">
                            <i data-lucide="briefcase"></i>
                            <h3>Investments/Debt</h3>
                            <p>Track stocks, real estate, cash, or loans. For <strong>Debt</strong>, set your interest rate and monthly payment to see exactly when you'll be debt-free. Each asset can have its own return rate and target allocation.</p>
                        </div>
                        <div class="card guide-card">
                            <i data-lucide="calendar"></i>
                            <h3>Income/Events</h3>
                            <p>Model life changes like a new job, a major purchase, or retirement withdrawals. You can set <strong>Recurring</strong> events with specific start/end dates, or withdraw a <strong>Percentage (%)</strong> of your balance.</p>
                        </div>
                        <div class="card guide-card">
                            <i data-lucide="target"></i>
                            <h3>Financial Goals</h3>
                            <p>Set targets for retirement, a home down payment, or an emergency fund. We'll track your progress and tell you if you're <strong>On Track</strong> based on your current projections and target years.</p>
                        </div>
                        <div class="card guide-card">
                            <i data-lucide="file-output"></i>
                            <h3>Export/Share</h3>
                            <p>Download your data as <strong>Excel/CSV</strong> for your records, or generate a <strong>Share Link</strong> to save or send your projection. All data is stored locally in your browser for total privacy.</p>
                        </div>
                        <div class="card guide-card">
                            <i data-lucide="bot"></i>
                            <h3>AI Analysis</h3>
                            <p>Generate a professional-grade prompt for ChatGPT based on your actual data. Get personalized insights on asset allocation, retirement readiness, and financial optimization in one click.</p>
                        </div>
                        <div class="card guide-card">
                            <i data-lucide="flask-conical"></i>
                            <h3>Advanced Simulations</h3>
                            <p>Use <strong>Monte Carlo</strong> to see probability of success, <strong>Sequence of Returns</strong> to test crash timing, <strong>FIRE SWR</strong> to find your Financial Independence date, <strong>Compound Interest</strong> for quick growth estimates, and <strong>Loan Amortization</strong> to see your payment breakdown.</p>
                        </div>
                        <div class="card guide-card">
                            <i data-lucide="command"></i>
                            <h3>Hotkeys & Privacy</h3>
                            <p><strong>Alt + A</strong>: New Asset<br><strong>Ctrl + E</strong>: New Event<br><strong>Ctrl + G</strong>: New Goal<br><strong>Esc</strong>: Close Modal<br><br>Your data <strong>never leaves your device</strong>.</p>
                        </div>
                        <div class="card guide-card">
                            <i data-lucide="info"></i>
                            <h3>Onboarding Guide</h3>
                            <p>Need a refresher on how to use the app? You can re-enable the step-by-step onboarding tips and highlights here.</p>
                            <button class="btn btn-outline btn-sm" style="margin-top: 1rem;" onclick="enableOnboarding()">Enable Onboarding Tips</button>
                        </div>
                    </div>
                </div>

                <!-- AI Analysis Tab -->
                <div class="tab-content" id="ai-analysis">
                    <div class="content-header">
                        <h2>AI Financial Analysis</h2>
                    </div>
                    <div class="ai-container">
                        <div class="card ai-card main">
                            <i data-lucide="zap"></i>
                            <h3>Quick AI Analysis</h3>
                            <p>Analyze your data directly with ChatGPT.</p>
                            <button class="btn btn-primary" onclick="openChatGPT()">Launch ChatGPT</button>
                        </div>
                        <div class="card ai-card">
                            <h3>Manual Analysis</h3>
                            <textarea id="manual-prompt" readonly></textarea>
                            <button class="btn btn-outline" onclick="copyManualPrompt()">Copy Prompt</button>
                        </div>
                    </div>
                </div>

                <!-- Advanced Tab -->
            </div>
        </main>
    </div>

    <!-- Mobile Bottom Navigation -->
    <nav class="bottom-nav">
        <button class="bottom-nav-item active" data-tab="dashboard">
            <i data-lucide="layout-dashboard"></i>
            <span>Home</span>
        </button>
        <button class="bottom-nav-item" data-tab="investments">
            <i data-lucide="briefcase"></i>
            <span>Add Assets/Debt</span>
        </button>
        <button class="bottom-nav-item" data-tab="events">
            <i data-lucide="calendar"></i>
            <span>Add Income/Withdrawal</span>
        </button>
        <button class="bottom-nav-item" data-tab="goals">
            <i data-lucide="target"></i>
            <span>Goals</span>
        </button>
        <button class="bottom-nav-item" data-tab="ai-analysis">
            <i data-lucide="bot"></i>
            <span>AI</span>
        </button>
    </nav>

    <!-- Modals (IDs preserved) -->
    <div class="modal" id="investment-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Asset/Debt Details</h3>
                <button class="close-btn" onclick="closeModal('investment-modal')"><i data-lucide="x"></i></button>
            </div>
            <form id="investment-form">
                <!-- Form fields preserved with updated styling -->
                <div class="form-group">
                    <label>Name</label>
                    <input type="text" id="investment-name" required placeholder="e.g. S&P 500 Index">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Type</label>
                        <select id="investment-type" onchange="updateInvestmentDefaults()">
                            <option value="Stocks">Stocks</option>
                            <option value="Bonds">Bonds</option>
                            <option value="Real Estate">Real Estate</option>
                            <option value="Cash">Cash</option>
                            <option value="Cryptocurrency">Crypto</option>
                            <option value="Mutual Fund/Index Fund">Fund</option>
                            <option value="Debt">Debt/Loan</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label id="investment-amount-label">Initial Amount ($)</label>
                        <div class="slider-with-input">
                            <div class="input-with-symbol currency" data-symbol="$">
                                <input type="number" id="investment-amount" required value="10000" oninput="document.getElementById('investment-amount-slider').value = this.value">
                            </div>
                            <input type="range" id="investment-amount-slider" min="0" max="1000000" step="1000" value="10000" oninput="document.getElementById('investment-amount').value = this.value">
                        </div>
                    </div>
                    <div class="form-group">
                        <label id="investment-return-label" data-tooltip="The expected annual growth rate of this asset. Stocks average 7-10%, Cash 2-4%.">Return Rate (%)</label>
                        <div class="slider-with-input">
                            <div class="input-with-symbol percent">
                                <input type="number" id="investment-return" required value="7" step="0.1" oninput="document.getElementById('investment-return-slider').value = this.value">
                            </div>
                            <input type="range" id="investment-return-slider" min="-20" max="50" step="0.5" value="7" oninput="document.getElementById('investment-return').value = this.value">
                        </div>
                    </div>
                </div>
                <div id="debt-fields" class="form-group" style="display: none;">
                    <div class="form-row">
                        <div class="form-group">
                            <label data-tooltip="The fixed monthly amount you pay towards this debt.">Monthly Payment ($)</label>
                            <div class="slider-with-input">
                                <div class="input-with-symbol currency" data-symbol="$">
                                    <input type="number" id="debt-payment" value="0" oninput="document.getElementById('debt-payment-slider').value = this.value">
                                </div>
                                <input type="range" id="debt-payment-slider" min="0" max="10000" step="100" value="0" oninput="document.getElementById('debt-payment').value = this.value">
                            </div>
                        </div>
                        <div class="form-group">
                            <label data-tooltip="The asset account used to pay this debt.">Funding Source</label>
                            <select id="debt-funding-source">
                                <option value="proportional">Proportional (All Assets)</option>
                                <option value="virtual">Virtual Balance (Income)</option>
                            </select>
                        </div>
                    </div>
                    <span class="input-hint">This amount will be deducted from your selected funding source every month to pay down this debt.</span>
                </div>
                <div class="modal-footer">
                    <button type="button" id="delete-investment-btn" class="btn btn-danger" style="display: none; margin-right: auto;" onclick="deleteCurrentInvestment()">Delete Item</button>
                    <button type="button" class="btn btn-text" onclick="closeModal('investment-modal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Item</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal" id="event-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="event-modal-title">Financial Event</h3>
                <button class="close-btn" onclick="closeModal('event-modal')"><i data-lucide="x"></i></button>
            </div>
            <form id="event-form">
                <div class="form-group">
                    <label>Event Type</label>
                    <select id="event-type" onchange="updateEventForm()">
                        <option value="income">Income</option>
                        <option value="expense">Expense</option>
                        <option value="transfer">Transfer</option>
                        <option value="withdrawal">Withdrawal</option>
                        <option value="rebalancing">Rebalancing</option>
                    </select>
                </div>
                <!-- Unified Event Fields -->
                <div class="form-group" id="recurring-toggle-group">
                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                        <input type="checkbox" id="event-is-recurring" style="width: auto;" onchange="toggleRecurringFields()">
                        <span>Is this a recurring event?</span>
                    </label>
                </div>

                <div id="common-fields" class="event-fields">
                    <div id="one-time-date-group" class="form-group">
                        <label>Date</label>
                        <input type="date" id="event-date">
                    </div>
                    
                    <div id="recurring-fields-group" style="display: none;">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Frequency</label>
                                <select id="event-frequency">
                                    <option value="monthly">Monthly</option>
                                    <option value="quarterly">Quarterly</option>
                                    <option value="annually" selected>Annually</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Start Date</label>
                                <input type="date" id="event-start-date">
                            </div>
                            <div class="form-group">
                                <label>End Date (Optional)</label>
                                <input type="date" id="event-end-date">
                            </div>
                        </div>
                    </div>

                    <div id="amount-fields-group">
                        <div class="form-row">
                            <div id="value-type-group" class="form-group">
                                <label>Value Type</label>
                                <select id="event-amount-type" onchange="handleValueTypeChange('unified')">
                                    <option value="fixed">Fixed Amount ($)</option>
                                    <option value="percent">Percentage (%)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label id="event-amount-label" data-tooltip="The amount for this event. Positive for income, negative for expenses.">Value (Amount or %)</label>
                                <div class="slider-with-input">
                                    <div class="input-with-symbol dynamic" id="event-amount-wrapper">
                                        <input type="number" id="event-amount" oninput="document.getElementById('event-amount-slider').value = this.value">
                                    </div>
                                    <input type="range" id="event-amount-slider" min="0" max="100000" step="100" value="0" oninput="document.getElementById('event-amount').value = this.value">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="destination-group" class="form-group" style="display: none;">
                        <label>Withdrawal Destination</label>
                        <select id="withdrawal-destination">
                            <option value="external">External (Reduces Net Worth)</option>
                            <option value="cash">Cash Account (Internal Transfer)</option>
                        </select>
                    </div>

                    <div class="form-row" id="source-target-row">
                        <div id="source-group" class="form-group">
                            <label id="source-label">Source Account</label>
                            <select id="event-source"></select>
                        </div>
                        <div id="target-group" class="form-group">
                            <label id="target-label">Target Account</label>
                            <select id="event-target"></select>
                        </div>
                    </div>

                    <div class="form-group" id="description-group">
                        <label>Description (Optional)</label>
                        <input type="text" id="event-description">
                    </div>
                </div>

                <div id="rebalancing-fields" class="event-fields" style="display: none;">
                    <div id="rebalancing-preview-container" class="form-group">
                        <label>Target Percentages</label>
                        <div id="rebalancing-preview-list" class="rebalancing-preview-list">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-text" onclick="closeModal('event-modal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Event</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Other Modals simplified but functional -->
    <div class="modal" id="contact-modal"><div class="modal-content"><h3>Contact Us</h3><p>myprojectioncalculator@gmail.com</p><button onclick="closeModal('contact-modal')">Close</button></div></div>
    <div class="modal" id="privacy-policy-modal"><div class="modal-content"><h3>Privacy Policy</h3><button onclick="closeModal('privacy-policy-modal')">Close</button></div></div>
    <div class="modal" id="disclaimer-modal"><div class="modal-content"><h3>Disclaimer</h3><p>Not financial advice.</p><button onclick="closeModal('disclaimer-modal')">I Understand</button></div></div>
    <div class="modal" id="quick-event-type-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Event</h3>
                <button class="close-btn" onclick="closeModal('quick-event-type-modal')"><i data-lucide="x"></i></button>
            </div>
                <div class="modal-body">
                <div class="quick-event-buttons">
                    <button class="btn btn-outline" onclick="quickAddEventType('income')">
                        <i data-lucide="arrow-down-left"></i>
                        <span>Income</span>
                    </button>
                    <button class="btn btn-outline" onclick="quickAddEventType('expense')">
                        <i data-lucide="arrow-up-right"></i>
                        <span>Expense</span>
                    </button>
                    <button class="btn btn-outline" onclick="quickAddEventType('transfer')">
                        <i data-lucide="repeat"></i>
                        <span>Transfer</span>
                    </button>
                    <button class="btn btn-outline" onclick="quickAddEventType('withdrawal')">
                        <i data-lucide="wallet"></i>
                        <span>Withdrawal</span>
                    </button>
                    <button class="btn btn-outline" onclick="quickAddEventType('rebalancing')">
                        <i data-lucide="refresh-cw"></i>
                        <span>Rebalance</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="goal-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="goal-modal-title">Financial Goal</h3>
                <button class="close-btn" onclick="closeModal('goal-modal')"><i data-lucide="x"></i></button>
            </div>
            <form id="goal-form">
                <div class="form-group">
                    <label>Category</label>
                    <select id="goal-category" onchange="handleGoalCategoryChange()">
                        <option value="retirement">Retirement</option>
                        <option value="emergency-fund">Emergency Fund</option>
                        <option value="home">Home Purchase</option>
                        <option value="car">Car Purchase</option>
                        <option value="education">Education/College Fund</option>
                        <option value="vacation">Vacation/Travel</option>
                        <option value="investment">Investment Target</option>
                        <option value="other">Other / Custom</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Goal Name</label>
                    <input type="text" id="goal-name" placeholder="e.g., Early Retirement" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Target Amount ($)</label>
                        <div class="input-with-symbol currency">
                            <input type="number" id="goal-amount" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Target Year</label>
                        <input type="number" id="goal-year" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>Goal Type</label>
                    <select id="goal-type">
                        <option value="net-worth">Total Net Worth</option>
                        <option value="investment">Specific Asset Balance</option>
                    </select>
                </div>
                <div id="goal-target-asset-group" class="form-group" style="display: none;">
                    <label>Target Asset</label>
                    <select id="goal-target-asset"></select>
                </div>
                <div id="goal-deduct-group" class="form-group" style="display: none;">
                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                        <input type="checkbox" id="goal-deduct" style="width: auto;">
                        <span>Deduct amount from asset when goal is reached?</span>
                    </label>
                    <span class="input-hint">Enable this to simulate the "purchase" or withdrawal once your goal balance is met.</span>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-text" onclick="closeModal('goal-modal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Goal</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal" id="projection-details-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="details-modal-year">Year 2024 Details</h3>
                <button class="close-btn" onclick="closeModal('projection-details-modal')"><i data-lucide="x"></i></button>
            </div>
            <div class="details-body">
                <div class="details-stats-grid">
                    <div class="detail-stat-card">
                        <label>Net Worth</label>
                        <span id="details-net-worth">$0</span>
                    </div>
                    <div class="detail-stat-card">
                        <label>Total Growth</label>
                        <span id="details-growth" class="text-success">$0</span>
                    </div>
                </div>
                
                <h4 class="details-section-title">Asset Breakdown</h4>
                <div id="details-asset-list" class="details-list"></div>
                
                <h4 class="details-section-title">Events This Year</h4>
                <div id="details-event-list" class="details-list"></div>
            </div>
        </div>
    </div>

    <div id="toast-container"></div>
    <div id="global-tooltip"></div>
    <input type="file" id="import-file" style="display:none">

    <!-- Auth Modal -->
    <div class="modal auth-modal" id="auth-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="auth-modal-title">Welcome to My Projection</h3>
                <button class="close-btn" onclick="closeModal('auth-modal')"><i data-lucide="x"></i></button>
            </div>
            
            <div id="login-section">
                <form id="login-form">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="login-email" required placeholder="name@email.com">
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="login-password" required placeholder="••••••••">
                    </div>
                    <div class="modal-footer">
                        <p class="auth-switch-text">Don't have an account? <a href="#" onclick="switchAuthView('signup')">Sign Up</a></p>
                        <button type="submit" class="btn btn-primary">Login</button>
                    </div>
                </form>
            </div>

            <div id="signup-section" style="display: none;">
                <form id="signup-form">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="signup-email" required placeholder="name@email.com">
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="signup-password" required placeholder="Minimum 6 characters">
                    </div>
                    <div class="modal-footer">
                        <p class="auth-switch-text">Already have an account? <a href="#" onclick="switchAuthView('login')">Login</a></p>
                        <button type="submit" class="btn btn-primary">Create Account</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Initialize Lucide icons
        lucide.createIcons();
    </script>
</body>
</html>
